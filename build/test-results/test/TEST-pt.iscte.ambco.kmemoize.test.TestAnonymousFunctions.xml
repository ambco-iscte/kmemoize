<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="pt.iscte.ambco.kmemoize.test.TestAnonymousFunctions" tests="2" skipped="0" failures="0" errors="0" timestamp="2026-02-02T19:10:03.299Z" hostname="LAPTOP-AMBCO" time="0.988">
  <properties/>
  <testcase name="testTwoParameters()" classname="pt.iscte.ambco.kmemoize.test.TestAnonymousFunctions" time="0.581"/>
  <testcase name="testOneParameterHardcoded()" classname="pt.iscte.ambco.kmemoize.test.TestAnonymousFunctions" time="0.406"/>
  <system-out><![CDATA[w: // MODULE: <main>
// FILE: Kotlin.kt
// path: C:/Users/ASUS/AppData/Local/Temp/Kotlin-Compilation12868684285115734173/sources/Kotlin.kt

fun findFirstOrNull(list: List<Pair<Int, Int>>, predicate: Function2<Int, Int, Boolean>): Pair<Int, Int>? {
  { // BLOCK
    val <iterator>: Iterator<Pair<Int, Int>> = list.iterator()
    while (<iterator>.hasNext()) { // BLOCK
      val element: Pair<Int, Int> = <iterator>.next()
      { // BLOCK
        when {
          predicate.invoke(p1 = element.<get-first>(), p2 = element.<get-second>()) -> return element
        }
      }
    }
  }
  return null
}

fun firstBiggerThan(list: List<Pair<Int, Int>>, e: Int): Pair<Int, Int>? {
  return findFirstOrNull(list = list, predicate =   @Memoize
local fun <anonymous>(x: Int, y: Int): Boolean {
    when {
      #anonymous383679057Memory.containsKey(key = listOf<Int>(elements = [x, y])).not() -> { // BLOCK
        #anonymous383679057Memory.put(key = listOf<Int>(elements = [x, y]), value = when {
          greater(arg0 = x, arg1 = e) -> greater(arg0 = y, arg1 = e)
          else -> false
        })
      }
    }
    return CHECK_NOT_NULL<Boolean>(arg0 = #anonymous383679057Memory.get(key = listOf<Int>(elements = [x, y])))
  }
)
}

private /* static final field */ val anonymous383679057Memory: MutableMap<List<Int>, Boolean> = mutableMapOf<List<Int>, Boolean>()
// FILE: Memoize.kt
// path: C:/Users/ASUS/AppData/Local/Temp/Kotlin-Compilation12868684285115734173/sources/Memoize.kt
package pt.iscte.ambco.kmemoize.api

@Retention(value = AnnotationRetention.RUNTIME)
@Target(allowedTargets = [AnnotationTarget.FUNCTION])
open annotation class Memoize : Annotation {
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

  /* fake */ override operator fun equals(other: Any?): Boolean

  /* fake */ override fun hashCode(): Int

  /* fake */ override fun toString(): String

}

@Retention(value = AnnotationRetention.RUNTIME)
@Target(allowedTargets = [AnnotationTarget.FUNCTION])
@RequiresOptIn(message = "Forcibly memoizing impure functions may lead to unintended behaviour.")
open annotation class UnsafeMemoize : Annotation {
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

  /* fake */ override operator fun equals(other: Any?): Boolean

  /* fake */ override fun hashCode(): Int

  /* fake */ override fun toString(): String

}


w: // MODULE: <main>
// FILE: Kotlin.kt
// path: C:/Users/ASUS/AppData/Local/Temp/Kotlin-Compilation13086530572183695358/sources/Kotlin.kt

fun findFirstOrNull(list: List<Int>, predicate: Function1<Int, Boolean>): Int? {
  { // BLOCK
    val <iterator>: Iterator<Int> = list.iterator()
    while (<iterator>.hasNext()) { // BLOCK
      val element: Int = <iterator>.next()
      { // BLOCK
        when {
          predicate.invoke(p1 = element) -> return element
        }
      }
    }
  }
  return null
}

fun firstBiggerThan5(list: List<Int>): Int? {
  return findFirstOrNull(list = list, predicate =   @Memoize
local fun <anonymous>(it: Int): Boolean {
    when {
      #anonymous1251687413Memory.containsKey(key = it).not() -> { // BLOCK
        #anonymous1251687413Memory.put(key = it, value = greater(arg0 = it, arg1 = 5))
      }
    }
    return CHECK_NOT_NULL<Boolean>(arg0 = #anonymous1251687413Memory.get(key = it))
  }
)
}

private /* static final field */ val anonymous1251687413Memory: MutableMap<Int, Boolean> = mutableMapOf<Int, Boolean>()
// FILE: Memoize.kt
// path: C:/Users/ASUS/AppData/Local/Temp/Kotlin-Compilation13086530572183695358/sources/Memoize.kt
package pt.iscte.ambco.kmemoize.api

@Retention(value = AnnotationRetention.RUNTIME)
@Target(allowedTargets = [AnnotationTarget.FUNCTION])
open annotation class Memoize : Annotation {
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

  /* fake */ override operator fun equals(other: Any?): Boolean

  /* fake */ override fun hashCode(): Int

  /* fake */ override fun toString(): String

}

@Retention(value = AnnotationRetention.RUNTIME)
@Target(allowedTargets = [AnnotationTarget.FUNCTION])
@RequiresOptIn(message = "Forcibly memoizing impure functions may lead to unintended behaviour.")
open annotation class UnsafeMemoize : Annotation {
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

  /* fake */ override operator fun equals(other: Any?): Boolean

  /* fake */ override fun hashCode(): Int

  /* fake */ override fun toString(): String

}


]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
